package ta_lib

import (
	"fmt"
	"testing"
)

func TestGetIchimokuCloud(t *testing.T) {

	data := []Candle{
		{"2021-08-30", 205.000000, 218.190002, 203.020004, 209.199997, 3309600},
		{"2021-08-31", 212.699997, 222.300003, 211.460007, 218.240005, 3574700},
		{"2021-09-01", 224.000000, 231.440002, 208.020004, 212.970001, 4453800},
		{"2021-09-02", 213.860001, 214.800003, 206.300003, 213.520004, 1852000},
		{"2021-09-03", 212.050003, 216.270004, 198.839996, 202.750000, 2658600},
		{"2021-09-07", 206.250000, 209.899994, 196.100006, 199.000000, 2496300},
		{"2021-09-08", 201.860001, 206.880005, 190.679993, 198.800003, 5173600},
		{"2021-09-09", 180.089996, 202.000000, 178.000000, 199.179993, 7511500},
		{"2021-09-10", 198.410004, 202.160004, 190.000000, 190.410004, 3037000},
		{"2021-09-13", 193.750000, 208.880005, 191.500000, 203.399994, 4334100},
		{"2021-09-14", 200.649994, 204.619995, 195.000000, 199.240005, 2141600},
		{"2021-09-15", 197.000000, 204.869995, 193.750000, 204.520004, 2310400},
		{"2021-09-16", 202.330002, 216.550003, 201.149994, 206.369995, 3058200},
		{"2021-09-17", 208.020004, 212.490005, 200.779999, 204.970001, 3945900},
		{"2021-09-20", 200.000000, 202.850006, 184.550003, 192.199997, 3941800},
		{"2021-09-21", 199.360001, 199.360001, 186.000000, 189.949997, 2633800},
		{"2021-09-22", 189.639999, 193.500000, 186.289993, 190.139999, 2256600},
		{"2021-09-23", 192.330002, 195.750000, 190.600006, 191.240005, 1682300},
		{"2021-09-24", 191.000000, 191.720001, 184.110001, 185.160004, 1685800},
		{"2021-09-27", 185.919998, 192.050003, 185.869995, 189.479996, 1470100},
		{"2021-09-28", 188.000000, 190.809998, 178.000000, 178.600006, 1770500},
		{"2021-09-29", 180.089996, 184.479996, 174.610001, 175.919998, 1899900},
		{"2021-09-30", 175.000000, 185.449997, 166.789993, 175.470001, 3170700},
		{"2021-10-01", 179.399994, 179.490005, 172.250000, 176.910004, 1551100},
		{"2021-10-04", 175.949997, 176.949997, 170.770004, 171.360001, 1195700},
		{"2021-10-05", 171.190002, 173.169998, 166.699997, 172.179993, 1315900},
		{"2021-10-06", 170.059998, 172.960007, 165.809998, 171.070007, 1200300},
		{"2021-10-07", 172.000000, 175.199997, 170.539993, 172.119995, 1159300},
		{"2021-10-08", 172.500000, 175.720001, 171.119995, 172.679993, 817000},
		{"2021-10-11", 173.000000, 188.490005, 173.000000, 178.100006, 2684900},
		{"2021-10-12", 180.500000, 181.779999, 173.800003, 175.820007, 1233700},
		{"2021-10-13", 178.300003, 188.210007, 176.000000, 184.059998, 1927900},
		{"2021-10-14", 183.759995, 190.199997, 182.600006, 183.830002, 1673900},
		{"2021-10-15", 184.000000, 186.979996, 180.880005, 183.279999, 1197700},
		{"2021-10-18", 182.940002, 189.869995, 182.550003, 186.020004, 1589600},
		{"2021-10-19", 188.990005, 192.179993, 184.399994, 186.789993, 2070600},
		{"2021-10-20", 186.330002, 188.000000, 181.979996, 184.520004, 2276900},
		{"2021-10-21", 184.710007, 190.699997, 180.600006, 181.710007, 2402400},
		{"2021-10-22", 178.100006, 179.490005, 167.800003, 169.800003, 2800400},
		{"2021-10-25", 169.419998, 174.800003, 167.259995, 173.970001, 1442800},
		{"2021-10-26", 173.360001, 185.000000, 172.500000, 177.839996, 2176700},
		{"2021-10-27", 180.000000, 183.089996, 172.330002, 173.509995, 1107000},
		{"2021-10-28", 175.160004, 183.139999, 175.000000, 182.850006, 1696200},
		{"2021-10-29", 182.809998, 185.750000, 178.000000, 183.509995, 2289600},
		{"2021-11-01", 182.529999, 208.570007, 182.050003, 200.089996, 4944200},
		{"2021-11-02", 199.350006, 211.940002, 191.690002, 206.990005, 3882300},
		{"2021-11-03", 214.000000, 255.690002, 208.250000, 218.330002, 11265600},
		{"2021-11-04", 222.000000, 228.970001, 211.550003, 217.839996, 2908000},
		{"2021-11-05", 220.639999, 221.000000, 209.009995, 213.250000, 1809100},
		{"2021-11-08", 212.500000, 225.039993, 212.009995, 218.639999, 2157900},
		{"2021-11-09", 222.000000, 223.490005, 204.440002, 206.600006, 1845300},
		{"2021-11-10", 202.119995, 207.389999, 196.500000, 199.190002, 1309400},
	}

	cloud, err := GetIchimokuCloud(data)
	if err != nil {
		t.Errorf("error %s", err)
	}

	println(fmt.Sprintf("Price: %v", cloud.Price))
	println(fmt.Sprintf("TenkanSen: %v", cloud.TenkanSen))
	println(fmt.Sprintf("KijunSen: %v", cloud.KijunSen))
	println(fmt.Sprintf("SenkouSpanA: %v", cloud.SenkouSpanA))
	println(fmt.Sprintf("SenkouSpanB: %v", cloud.SenkouSpanB))
	println(fmt.Sprintf("Chikou: %v", cloud.ChikouSpan))

}
